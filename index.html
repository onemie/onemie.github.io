
<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   <script type="text/javascript" src="https://cdn.bitmovin.com/player/web/8/bitmovinplayer.js"></script>
   
</head>
<body>
<div id="my-player"></div>
<script type="text/javascript">
const container = document.getElementById('my-player');
const playerConfig = {
    key: '96dca549-b37c-4c02-9847-bfd953323ab5'
};
const source = {
    title: "Getting Started with the Bitmovin Player",
    description: "Now you are ready to embed the Bitmovin Player into your own website :)",
    hls: 'https://s3-ap-southeast-1.amazonaws.com/apac.solutions.bitmovin.com/outputs/saravanan/axinom/master-cbc-h265.m3u8', //<=== bitmovin encoded
  //hls: 'https://s3-ap-southeast-1.amazonaws.com/apac.solutions.bitmovin.com/outputs/saravanan/shaka/shaka_h265_master.m3u8', //<====ffmpeg 
 
    drm: {
      fairplay: {
          // https://cdn.bitmovin.com/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#la_url
          LA_URL: 'https://drm-fairplay-licensing.axtest.net/AcquireLicense',
          // https://cdn.bitmovin.com/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#certificateurl
          certificateURL: 'https://vtb.axinom.com/FPScert/fairplay.cer',
          // https://cdn.bitmovin.com/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#headers
          headers: {
              'X-AxDRM-Message' : 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiNjllNTQwODgtZTllMC00NTMwLThjMWEtMWViNmRjZDBkMTRlIiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsInZlcnNpb24iOjIsImxpY2Vuc2UiOnsiYWxsb3dfcGVyc2lzdGVuY2UiOnRydWV9LCJjb250ZW50X2tleXNfc291cmNlIjp7ImlubGluZSI6W3siaWQiOiJmOGM4MGMyNS02OTBmLTQ3MzYtODEzMi00MzBlNWM2OTk0Y2UiLCJlbmNyeXB0ZWRfa2V5IjoiaVhxNDlaODlzOGRDajBqbTJBN1h6UT09IiwidXNhZ2VfcG9saWN5IjoiUG9saWN5IEEifV19LCJjb250ZW50X2tleV91c2FnZV9wb2xpY2llcyI6W3sibmFtZSI6IlBvbGljeSBBIiwicGxheXJlYWR5Ijp7Im1pbl9kZXZpY2Vfc2VjdXJpdHlfbGV2ZWwiOjE1MCwicGxheV9lbmFibGVycyI6WyI3ODY2MjdEOC1DMkE2LTQ0QkUtOEY4OC0wOEFFMjU1QjAxQTciXX19XX19.k9OlwW0rUwuf5d5Eb0iO98AFR3qp7qKdFzSbg2PQj78',
              'Content-Type': 'application/octet-stream'
          },
          // https://bitmovin.com/docs/player/api-reference/web/web-sdk-api-reference-v8#/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#preparecontentid
          prepareContentId: function(uri) {
              // replace the skd:// portion with an empty string to get the ContentID
              contentId = uri.replace(/^.*:\/\//, '');
              console.log(contentId);
              return contentId;
          },
          // https://bitmovin.com/docs/player/api-reference/web/web-sdk-api-reference-v8#/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#preparemessage
          prepareMessage: function(event, session) {
              // we want to send the license challenge as a binary
              var video = event.target
              console.log(event);
              return event.message;
          },
          // https://bitmovin.com/docs/player/api-reference/web/web-sdk-api-reference-v8#/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#preparelicense
          prepareLicense: function(license) {
              // format axinom's license challenge response into binary and send to browser
              return new Uint8Array(license);
          },
          // https://cdn.bitmovin.com/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#useuint16initdata
          useUint16InitData: true,
          // // https://cdn.bitmovin.com/player/web/8/docs/interfaces/drm.applefairplaydrmconfig.html#licenseresponsetype
          licenseResponseType: "arraybuffer"
      }
  }
};
const player = new bitmovin.player.Player(container, playerConfig);
 
player.load(source).then(
    player => {
        console.log('Successfully created Bitmovin Player instance')
    },
    reason => {
        console.log('Error while creating Bitmovin Player instance')
    }
);
</script>
</body>
</html>
